'use strict';

let _path = require('path');

let _path2 = _interopRequireDefault(_path);

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

module.exports = Franz => {
  const getMessages = function getMessages() {
    // get unread messages
    const count = document.querySelectorAll('.guilds-wrapper .badge, .room-menu-options__item__unread-indicator-wrapper.has-unreads').length;

    // set Franz badge
    Franz.setBadge(count);
  };

  // check for new messages every second and update Franz badge
  Franz.loop(getMessages);

  // Hide download message
  Franz.injectCSS(_path2.default.join(__dirname, 'service.css'));
};
// # sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpc2NvcmQvd2Vidmlldy5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiRnJhbnoiLCJnZXRNZXNzYWdlcyIsImNvdW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwic2V0QmFkZ2UiLCJsb29wIiwiaW5qZWN0Q1NTIiwiam9pbiIsIl9fZGlybmFtZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7O0FBRUFBLE9BQU9DLE9BQVAsR0FBa0JDLEtBQUQsSUFBVztBQUMxQixRQUFNQyxjQUFjLFNBQVNBLFdBQVQsR0FBdUI7QUFDekM7QUFDQSxVQUFNQyxRQUFRQyxTQUFTQyxnQkFBVCxDQUEwQix3QkFBMUIsRUFBb0RDLE1BQWxFOztBQUVBO0FBQ0FMLFVBQU1NLFFBQU4sQ0FBZUosS0FBZjtBQUNELEdBTkQ7O0FBUUE7QUFDQUYsUUFBTU8sSUFBTixDQUFXTixXQUFYOztBQUVBO0FBQ0FELFFBQU1RLFNBQU4sQ0FBZ0IsZUFBS0MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLGFBQXJCLENBQWhCO0FBQ0QsQ0FkRCIsImZpbGUiOiJkaXNjb3JkL3dlYnZpZXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxubW9kdWxlLmV4cG9ydHMgPSAoRnJhbnopID0+IHtcbiAgY29uc3QgZ2V0TWVzc2FnZXMgPSBmdW5jdGlvbiBnZXRNZXNzYWdlcygpIHtcbiAgICAvLyBnZXQgdW5yZWFkIG1lc3NhZ2VzXG4gICAgY29uc3QgY291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ3VpbGRzLXdyYXBwZXIgLmJhZGdlJykubGVuZ3RoO1xuXG4gICAgLy8gc2V0IEZyYW56IGJhZGdlXG4gICAgRnJhbnouc2V0QmFkZ2UoY291bnQpO1xuICB9O1xuXG4gIC8vIGNoZWNrIGZvciBuZXcgbWVzc2FnZXMgZXZlcnkgc2Vjb25kIGFuZCB1cGRhdGUgRnJhbnogYmFkZ2VcbiAgRnJhbnoubG9vcChnZXRNZXNzYWdlcyk7XG5cbiAgLy8gSGlkZSBkb3dubG9hZCBtZXNzYWdlXG4gIEZyYW56LmluamVjdENTUyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnc2VydmljZS5jc3MnKSk7XG59O1xuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdpdHRlci93ZWJ2aWV3LmpzIl0sIm5hbWVzIjpbIl9wYXRoIiwicmVxdWlyZSIsIl9wYXRoMiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJGcmFueiIsImdldE1lc3NhZ2VzIiwiY291bnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJzZXRCYWRnZSIsImxvb3AiLCJpbmplY3RDU1MiLCJqb2luIiwiX19kaXJuYW1lIl0sIm1hcHBpbmdzIjoiOztBQUVBLElBQUlBLFFBQVFDLFFBQVEsTUFBUixDQUFaOztBQUVBLElBQUlDLFNBQVNDLHVCQUF1QkgsS0FBdkIsQ0FBYjs7QUFFQSxTQUFTRyxzQkFBVCxDQUFnQ0MsR0FBaEMsRUFBcUM7QUFBRSxTQUFPQSxPQUFPQSxJQUFJQyxVQUFYLEdBQXdCRCxHQUF4QixHQUE4QixFQUFFRSxTQUFTRixHQUFYLEVBQXJDO0FBQXdEOztBQUUvRkcsT0FBT0MsT0FBUCxHQUFrQkMsS0FBRCxJQUFXO0FBQzFCLFFBQU1DLGNBQWMsU0FBU0EsV0FBVCxHQUF1QjtBQUN6QztBQUNBLFVBQU1DLFFBQVFDLFNBQVNDLGdCQUFULENBQTBCLHdGQUExQixFQUFvSEMsTUFBbEk7O0FBRUE7QUFDQUwsVUFBTU0sUUFBTixDQUFlSixLQUFmO0FBQ0QsR0FORDs7QUFRQTtBQUNBRixRQUFNTyxJQUFOLENBQVdOLFdBQVg7O0FBRUE7QUFDQUQsUUFBTVEsU0FBTixDQUFnQmYsT0FBT0ksT0FBUCxDQUFlWSxJQUFmLENBQW9CQyxTQUFwQixFQUErQixhQUEvQixDQUFoQjtBQUNELENBZEQ7QUFlQSIsImZpbGUiOiJnaXR0ZXIvd2Vidmlldy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuXG5sZXQgX3BhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbmxldCBfcGF0aDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wYXRoKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxubW9kdWxlLmV4cG9ydHMgPSAoRnJhbnopID0+IHtcbiAgY29uc3QgZ2V0TWVzc2FnZXMgPSBmdW5jdGlvbiBnZXRNZXNzYWdlcygpIHtcbiAgICAvLyBnZXQgdW5yZWFkIG1lc3NhZ2VzXG4gICAgY29uc3QgY291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ3VpbGRzLXdyYXBwZXIgLmJhZGdlLCAucm9vbS1tZW51LW9wdGlvbnNfX2l0ZW1fX3VucmVhZC1pbmRpY2F0b3Itd3JhcHBlci5oYXMtdW5yZWFkcycpLmxlbmd0aDtcblxuICAgIC8vIHNldCBGcmFueiBiYWRnZVxuICAgIEZyYW56LnNldEJhZGdlKGNvdW50KTtcbiAgfTtcblxuICAvLyBjaGVjayBmb3IgbmV3IG1lc3NhZ2VzIGV2ZXJ5IHNlY29uZCBhbmQgdXBkYXRlIEZyYW56IGJhZGdlXG4gIEZyYW56Lmxvb3AoZ2V0TWVzc2FnZXMpO1xuXG4gIC8vIEhpZGUgZG93bmxvYWQgbWVzc2FnZVxuICBGcmFuei5pbmplY3RDU1MoX3BhdGgyLmRlZmF1bHQuam9pbihfX2Rpcm5hbWUsICdzZXJ2aWNlLmNzcycpKTtcbn07XG4vLyAjIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSW1ScGMyTnZjbVF2ZDJWaWRtbGxkeTVxY3lKZExDSnVZVzFsY3lJNld5SnRiMlIxYkdVaUxDSmxlSEJ2Y25Seklpd2lSbkpoYm5vaUxDSm5aWFJOWlhOellXZGxjeUlzSW1OdmRXNTBJaXdpWkc5amRXMWxiblFpTENKeGRXVnllVk5sYkdWamRHOXlRV3hzSWl3aWJHVnVaM1JvSWl3aWMyVjBRbUZrWjJVaUxDSnNiMjl3SWl3aWFXNXFaV04wUTFOVElpd2lhbTlwYmlJc0lsOWZaR2x5Ym1GdFpTSmRMQ0p0WVhCd2FXNW5jeUk2SWpzN1FVRkJRVHM3T3pzN08wRkJSVUZCTEU5QlFVOURMRTlCUVZBc1IwRkJhMEpETEV0QlFVUXNTVUZCVnp0QlFVTXhRaXhSUVVGTlF5eGpRVUZqTEZOQlFWTkJMRmRCUVZRc1IwRkJkVUk3UVVGRGVrTTdRVUZEUVN4VlFVRk5ReXhSUVVGUlF5eFRRVUZUUXl4blFrRkJWQ3hEUVVFd1FpeDNRa0ZCTVVJc1JVRkJiMFJETEUxQlFXeEZPenRCUVVWQk8wRkJRMEZNTEZWQlFVMU5MRkZCUVU0c1EwRkJaVW9zUzBGQlpqdEJRVU5FTEVkQlRrUTdPMEZCVVVFN1FVRkRRVVlzVVVGQlRVOHNTVUZCVGl4RFFVRlhUaXhYUVVGWU96dEJRVVZCTzBGQlEwRkVMRkZCUVUxUkxGTkJRVTRzUTBGQlowSXNaVUZCUzBNc1NVRkJUQ3hEUVVGVlF5eFRRVUZXTEVWQlFYRkNMR0ZCUVhKQ0xFTkJRV2hDTzBGQlEwUXNRMEZrUkNJc0ltWnBiR1VpT2lKa2FYTmpiM0prTDNkbFluWnBaWGN1YW5NaUxDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SnBiWEJ2Y25RZ2NHRjBhQ0JtY205dElDZHdZWFJvSnp0Y2JseHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQW9SbkpoYm5vcElEMCtJSHRjYmlBZ1kyOXVjM1FnWjJWMFRXVnpjMkZuWlhNZ1BTQm1kVzVqZEdsdmJpQm5aWFJOWlhOellXZGxjeWdwSUh0Y2JpQWdJQ0F2THlCblpYUWdkVzV5WldGa0lHMWxjM05oWjJWelhHNGdJQ0FnWTI5dWMzUWdZMjkxYm5RZ1BTQmtiMk4xYldWdWRDNXhkV1Z5ZVZObGJHVmpkRzl5UVd4c0tDY3VaM1ZwYkdSekxYZHlZWEJ3WlhJZ0xtSmhaR2RsSnlrdWJHVnVaM1JvTzF4dVhHNGdJQ0FnTHk4Z2MyVjBJRVp5WVc1NklHSmhaR2RsWEc0Z0lDQWdSbkpoYm5vdWMyVjBRbUZrWjJVb1kyOTFiblFwTzF4dUlDQjlPMXh1WEc0Z0lDOHZJR05vWldOcklHWnZjaUJ1WlhjZ2JXVnpjMkZuWlhNZ1pYWmxjbmtnYzJWamIyNWtJR0Z1WkNCMWNHUmhkR1VnUm5KaGJub2dZbUZrWjJWY2JpQWdSbkpoYm5vdWJHOXZjQ2huWlhSTlpYTnpZV2RsY3lrN1hHNWNiaUFnTHk4Z1NHbGtaU0JrYjNkdWJHOWhaQ0J0WlhOellXZGxYRzRnSUVaeVlXNTZMbWx1YW1WamRFTlRVeWh3WVhSb0xtcHZhVzRvWDE5a2FYSnVZVzFsTENBbmMyVnlkbWxqWlM1amMzTW5LU2s3WEc1OU8xeHVJbDE5XG4iXX0=