'use strict';

module.exports = Franz => {
    const getMessages = () => {
        let updates = 0;
        let inbox = 0;
        let full = 0;

        $('.b-folders-user .ui-droppable').each((i, obj) => {
            const countText = $(obj).find('.count').first().html();
            if (typeof countText === 'string' && countText !== '') {
                if ($(obj).hasClass('system')) {
                    if ($(obj).hasClass('i-am-inbox')) {
                        inbox += parseInt(countText);
                    }
                } else {
                    updates += parseInt(countText);
                }
            }
        });

        full = inbox + updates;
        Franz.setBadge(full);
    };
    Franz.loop(getMessages);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJhaW5sb29wL3dlYnZpZXcuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsIkZyYW56IiwiZ2V0TWVzc2FnZXMiLCJ1cGRhdGVzIiwiaW5ib3giLCJmdWxsIiwiJCIsImVhY2giLCJpIiwib2JqIiwiY291bnRUZXh0IiwiZmluZCIsImZpcnN0IiwiaHRtbCIsImhhc0NsYXNzIiwicGFyc2VJbnQiLCJzZXRCYWRnZSIsImxvb3AiXSwibWFwcGluZ3MiOiI7O0FBQUFBLE9BQU9DLE9BQVAsR0FBaUJDLFNBQVM7QUFDdEIsVUFBTUMsY0FBYyxNQUFNO0FBQ3RCLFlBQUlDLFVBQVUsQ0FBZDtBQUNBLFlBQUlDLFFBQVEsQ0FBWjtBQUNOLFlBQUlDLE9BQU8sQ0FBWDs7QUFFTUMsVUFBRSwrQkFBRixFQUFtQ0MsSUFBbkMsQ0FBd0MsQ0FBQ0MsQ0FBRCxFQUFJQyxHQUFKLEtBQVk7QUFDaEQsa0JBQU1DLFlBQVlKLEVBQUVHLEdBQUYsRUFBT0UsSUFBUCxDQUFZLFFBQVosRUFBc0JDLEtBQXRCLEdBQThCQyxJQUE5QixFQUFsQjtBQUNBLGdCQUFJLE9BQU9ILFNBQVAsS0FBcUIsUUFBckIsSUFBaUNBLGNBQWMsRUFBbkQsRUFBdUQ7QUFDbkQsb0JBQUlKLEVBQUVHLEdBQUYsRUFBT0ssUUFBUCxDQUFnQixRQUFoQixDQUFKLEVBQStCO0FBQzNCLHdCQUFJUixFQUFFRyxHQUFGLEVBQU9LLFFBQVAsQ0FBZ0IsWUFBaEIsQ0FBSixFQUFtQztBQUMvQlYsaUNBQVNXLFNBQVNMLFNBQVQsQ0FBVDtBQUNIO0FBQ0osaUJBSkQsTUFJTztBQUNIUCwrQkFBV1ksU0FBU0wsU0FBVCxDQUFYO0FBQ0g7QUFDSjtBQUNKLFNBWEQ7O0FBYU5MLGVBQU9ELFFBQVFELE9BQWY7QUFDTUYsY0FBTWUsUUFBTixDQUFlWCxJQUFmO0FBQ0gsS0FwQkQ7QUFxQkFKLFVBQU1nQixJQUFOLENBQVdmLFdBQVg7QUFDSCxDQXZCRCIsImZpbGUiOiJyYWlubG9vcC93ZWJ2aWV3LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBGcmFueiA9PiB7XG4gICAgY29uc3QgZ2V0TWVzc2FnZXMgPSAoKSA9PiB7XG4gICAgICAgIGxldCB1cGRhdGVzID0gMDtcbiAgICAgICAgbGV0IGluYm94ID0gMDtcblx0XHRsZXQgZnVsbCA9IDA7XG5cbiAgICAgICAgJCgnLmItZm9sZGVycy11c2VyIC51aS1kcm9wcGFibGUnKS5lYWNoKChpLCBvYmopID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50VGV4dCA9ICQob2JqKS5maW5kKCcuY291bnQnKS5maXJzdCgpLmh0bWwoKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY291bnRUZXh0ID09PSAnc3RyaW5nJyAmJiBjb3VudFRleHQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQob2JqKS5oYXNDbGFzcygnc3lzdGVtJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQob2JqKS5oYXNDbGFzcygnaS1hbS1pbmJveCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJveCArPSBwYXJzZUludChjb3VudFRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlcyArPSBwYXJzZUludChjb3VudFRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblx0XHRmdWxsID0gaW5ib3ggKyB1cGRhdGVzO1xuICAgICAgICBGcmFuei5zZXRCYWRnZShmdWxsKTtcbiAgICB9O1xuICAgIEZyYW56Lmxvb3AoZ2V0TWVzc2FnZXMpO1xufTtcbiJdfQ==