'use strict';

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

module.exports = Franz => {
  const UNREAD_BADGE_SELECTOR = '.navigation-item--badgeCount';

  const getMessages = function getMessages() {
    let directCount = 0;
    let indirectCount = 0;

    const elements = document.querySelectorAll('.navigation-bar-list .listItemWrapper');
    if (elements.length > 0 && elements[1].querySelector(UNREAD_BADGE_SELECTOR)) {
      directCount = parseInt(elements[1].querySelector(UNREAD_BADGE_SELECTOR).textContent, 10);
    }
    if (elements.length > 0 && elements[2].querySelector(UNREAD_BADGE_SELECTOR)) {
      indirectCount = parseInt(elements[2].querySelector(UNREAD_BADGE_SELECTOR).textContent, 10);
    }

    Franz.setBadge(directCount, indirectCount);
  };

  Franz.loop(getMessages);
  Franz.injectCSS(_path2.default.join(__dirname, 'service.css'));
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpc2Nvc3Bhcmsvd2Vidmlldy5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiRnJhbnoiLCJVTlJFQURfQkFER0VfU0VMRUNUT1IiLCJnZXRNZXNzYWdlcyIsImRpcmVjdENvdW50IiwiaW5kaXJlY3RDb3VudCIsImVsZW1lbnRzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwicXVlcnlTZWxlY3RvciIsInBhcnNlSW50IiwidGV4dENvbnRlbnQiLCJzZXRCYWRnZSIsImxvb3AiLCJpbmplY3RDU1MiLCJqb2luIiwiX19kaXJuYW1lIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7QUFFQUEsT0FBT0MsT0FBUCxHQUFrQkMsS0FBRCxJQUFXO0FBQzFCLFFBQU1DLHdCQUF3Qiw4QkFBOUI7O0FBRUEsUUFBTUMsY0FBYyxTQUFTQSxXQUFULEdBQXVCO0FBQ3pDLFFBQUlDLGNBQWMsQ0FBbEI7QUFDQSxRQUFJQyxnQkFBZ0IsQ0FBcEI7O0FBRUEsVUFBTUMsV0FBV0MsU0FBU0MsZ0JBQVQsQ0FBMEIsdUNBQTFCLENBQWpCO0FBQ0EsUUFBSUYsU0FBU0csTUFBVCxHQUFrQixDQUFsQixJQUF1QkgsU0FBUyxDQUFULEVBQVlJLGFBQVosQ0FBMEJSLHFCQUExQixDQUEzQixFQUE2RTtBQUMzRUUsb0JBQWNPLFNBQVNMLFNBQVMsQ0FBVCxFQUFZSSxhQUFaLENBQTBCUixxQkFBMUIsRUFBaURVLFdBQTFELEVBQXVFLEVBQXZFLENBQWQ7QUFDRDtBQUNELFFBQUlOLFNBQVNHLE1BQVQsR0FBa0IsQ0FBbEIsSUFBdUJILFNBQVMsQ0FBVCxFQUFZSSxhQUFaLENBQTBCUixxQkFBMUIsQ0FBM0IsRUFBNkU7QUFDM0VHLHNCQUFnQk0sU0FBU0wsU0FBUyxDQUFULEVBQVlJLGFBQVosQ0FBMEJSLHFCQUExQixFQUFpRFUsV0FBMUQsRUFBdUUsRUFBdkUsQ0FBaEI7QUFDRDs7QUFFRFgsVUFBTVksUUFBTixDQUFlVCxXQUFmLEVBQTRCQyxhQUE1QjtBQUNELEdBYkQ7O0FBZUFKLFFBQU1hLElBQU4sQ0FBV1gsV0FBWDtBQUNBRixRQUFNYyxTQUFOLENBQWdCLGVBQUtDLElBQUwsQ0FBVUMsU0FBVixFQUFxQixhQUFyQixDQUFoQjtBQUNELENBcEJEIiwiZmlsZSI6ImNpc2Nvc3Bhcmsvd2Vidmlldy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChGcmFueikgPT4ge1xuICBjb25zdCBVTlJFQURfQkFER0VfU0VMRUNUT1IgPSAnLm5hdmlnYXRpb24taXRlbS0tYmFkZ2VDb3VudCc7XG5cbiAgY29uc3QgZ2V0TWVzc2FnZXMgPSBmdW5jdGlvbiBnZXRNZXNzYWdlcygpIHtcbiAgICBsZXQgZGlyZWN0Q291bnQgPSAwO1xuICAgIGxldCBpbmRpcmVjdENvdW50ID0gMDtcblxuICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmlnYXRpb24tYmFyLWxpc3QgLmxpc3RJdGVtV3JhcHBlcicpO1xuICAgIGlmIChlbGVtZW50cy5sZW5ndGggPiAwICYmIGVsZW1lbnRzWzFdLnF1ZXJ5U2VsZWN0b3IoVU5SRUFEX0JBREdFX1NFTEVDVE9SKSkge1xuICAgICAgZGlyZWN0Q291bnQgPSBwYXJzZUludChlbGVtZW50c1sxXS5xdWVyeVNlbGVjdG9yKFVOUkVBRF9CQURHRV9TRUxFQ1RPUikudGV4dENvbnRlbnQsIDEwKTtcbiAgICB9XG4gICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA+IDAgJiYgZWxlbWVudHNbMl0ucXVlcnlTZWxlY3RvcihVTlJFQURfQkFER0VfU0VMRUNUT1IpKSB7XG4gICAgICBpbmRpcmVjdENvdW50ID0gcGFyc2VJbnQoZWxlbWVudHNbMl0ucXVlcnlTZWxlY3RvcihVTlJFQURfQkFER0VfU0VMRUNUT1IpLnRleHRDb250ZW50LCAxMCk7XG4gICAgfVxuXG4gICAgRnJhbnouc2V0QmFkZ2UoZGlyZWN0Q291bnQsIGluZGlyZWN0Q291bnQpO1xuICB9O1xuXG4gIEZyYW56Lmxvb3AoZ2V0TWVzc2FnZXMpO1xuICBGcmFuei5pbmplY3RDU1MocGF0aC5qb2luKF9fZGlybmFtZSwgJ3NlcnZpY2UuY3NzJykpO1xufTtcbiJdfQ==